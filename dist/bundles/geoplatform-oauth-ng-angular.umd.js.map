{"version":3,"file":"geoplatform-oauth-ng-angular.umd.js","sources":["ng://@geoplatform/oauth-ng/angular/index.ts"],"sourcesContent":["import { Subject } from 'rxjs'\nimport { MSG\n       , Messenger\n       , authMessage\n       , AuthConfig\n       , GeoPlatformUser\n       , AuthService\n       , DefaultAuthConf } from '@geoplatform/oauth-ng'\n\n/**\n * Angular implementation of message handler\n */\nclass msgProvider implements Messenger<Subject<MSG>> {\n    sub: Subject<MSG>\n\n    constructor(){\n        this.sub = new Subject<MSG>();\n    }\n\n    raw(){\n        return this.sub;\n    }\n\n    broadcast(name: authMessage, user: GeoPlatformUser){\n        this.sub.next({name, user})\n    }\n\n    on(name: authMessage, func: (e: Event, data: GeoPlatformUser) => any){\n        this.sub\n            .filter(msg => msg.name === name)\n            .subscribe(msg => func(new Event(msg.name), msg.user))\n    }\n}\n\n/**\n * Expose the class that can be loaded in Angular\n *\n * TODO: allow differnt types here:\n *  - Observible\n *  - Promise\n *  - Object\n */\nfunction ngGpoauthFactory(config?: AuthConfig): AuthService {\n    return new AuthService(Object.assign({}, DefaultAuthConf, config),  new msgProvider())\n}\n\n// Expose API for consumption\nexport { AuthService\n       , AuthConfig\n       , GeoPlatformUser\n       , ngGpoauthFactory }"],"names":["Subject","AuthService","DefaultAuthConf"],"mappings":";;;;;;IASA;;;IAGA;QAGI;YACI,IAAI,CAAC,GAAG,GAAG,IAAIA,YAAO,EAAO,CAAC;SACjC;QAED,yBAAG,GAAH;YACI,OAAO,IAAI,CAAC,GAAG,CAAC;SACnB;QAED,+BAAS,GAAT,UAAU,IAAiB,EAAE,IAAqB;YAC9C,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAC,IAAI,MAAA,EAAE,IAAI,MAAA,EAAC,CAAC,CAAA;SAC9B;QAED,wBAAE,GAAF,UAAG,IAAiB,EAAE,IAA8C;YAChE,IAAI,CAAC,GAAG;iBACH,MAAM,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,IAAI,KAAK,IAAI,GAAA,CAAC;iBAChC,SAAS,CAAC,UAAA,GAAG,IAAI,OAAA,IAAI,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,GAAA,CAAC,CAAA;SAC7D;QACL,kBAAC;KAAA,IAAA;;;;;;;;;IAUD,SAAS,gBAAgB,CAAC,MAAmB;QACzC,OAAO,IAAIC,mBAAW,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAEC,uBAAe,EAAE,MAAM,CAAC,EAAG,IAAI,WAAW,EAAE,CAAC,CAAA;KACzF;;;;;;;;;;;;;;;;;;;;;;;;"}