{"version":3,"file":"geoplatform-oauth-ng-angular.js","sources":["ng://@geoplatform/oauth-ng/angular/index.ts","ng://@geoplatform/oauth-ng/angular/geoplatform-oauth-ng-angular.ts"],"sourcesContent":["import { Subject } from 'rxjs'\nimport { MSG\n       , Messenger\n       , authMessage\n       , AuthConfig\n       , GeoPlatformUser\n       , AuthService\n       , DefaultAuthConf } from '@geoplatform/oauth-ng'\n\n/**\n * Angular implementation of message handler\n */\nclass msgProvider implements Messenger<Subject<MSG>> {\n    sub: Subject<MSG>\n\n    constructor(){\n        this.sub = new Subject<MSG>();\n    }\n\n    raw(){\n        return this.sub;\n    }\n\n    broadcast(name: authMessage, user: GeoPlatformUser){\n        this.sub.next({name, user})\n    }\n\n    on(name: authMessage, func: (e: Event, data: GeoPlatformUser) => any){\n        this.sub\n            .filter(msg => msg.name === name)\n            .subscribe(msg => func(new Event(msg.name), msg.user))\n    }\n}\n\n/**\n * Expose the class that can be loaded in Angular\n *\n * TODO: allow differnt types here:\n *  - Observible\n *  - Promise\n *  - Object\n */\nfunction ngGpoauthFactory(config?: AuthConfig): AuthService {\n    return new AuthService(Object.assign({}, DefaultAuthConf, config),  new msgProvider())\n}\n\n// Expose API for consumption\nexport { AuthService\n       , AuthConfig\n       , GeoPlatformUser\n       , ngGpoauthFactory }","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;AASA;;;AAGA,MAAM,WAAW;IAGb;QACI,IAAI,CAAC,GAAG,GAAG,IAAI,OAAO,EAAO,CAAC;KACjC;IAED,GAAG;QACC,OAAO,IAAI,CAAC,GAAG,CAAC;KACnB;IAED,SAAS,CAAC,IAAiB,EAAE,IAAqB;QAC9C,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC,CAAA;KAC9B;IAED,EAAE,CAAC,IAAiB,EAAE,IAA8C;QAChE,IAAI,CAAC,GAAG;aACH,MAAM,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,KAAK,IAAI,CAAC;aAChC,SAAS,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAA;KAC7D;CACJ;;;;;;;;;AAUD,SAAS,gBAAgB,CAAC,MAAmB;IACzC,OAAO,IAAI,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,eAAe,EAAE,MAAM,CAAC,EAAG,IAAI,WAAW,EAAE,CAAC,CAAA;CACzF;;AC5CD;;GAEG;;;;"}